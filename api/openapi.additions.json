{
	"paths": {
		"/api/contact-social-profiles": {
			"get": {
				"summary": "List contact social profiles",
				"tags": ["ContactSocialProfiles"],
				"parameters": [
					{ "in": "query", "name": "page", "schema": { "type": "integer", "minimum": 1 } },
					{ "in": "query", "name": "limit", "schema": { "type": "integer", "minimum": 1 } }
				],
				"responses": {
					"200": {
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"status": { "type": "string", "enum": ["ok"] },
										"data": { "type": "array", "items": { "$ref": "#/components/schemas/ContactSocialProfile" } },
										"meta": { "$ref": "#/components/schemas/PageMeta" }
									}
								}
							}
						}
					}
				}
			},
			"post": {
				"summary": "Create contact social profile",
				"tags": ["ContactSocialProfiles"],
				"requestBody": {
					"required": true,
					"content": { "application/json": { "schema": { "$ref": "#/components/schemas/ContactSocialProfileCreate" } } }
				},
				"responses": {
					"201": {
						"description": "Created",
						"content": { "application/json": { "schema": { "type": "object", "properties": { "status": { "type": "string", "enum": ["ok"] }, "data": { "$ref": "#/components/schemas/ContactSocialProfile" } } } } }
					}
				}
			}
		},
		"/api/ai/chat": {
			"post": {
				"summary": "Chat completion",
				"tags": ["AI"],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["messages"],
								"properties": {
									"messages": { "type": "array", "items": { "type": "object" } },
									"model": { "type": "string" },
									"temperature": { "type": "number" }
								}
							}
						}
					}
				},
				"responses": {
					"200": { "description": "Assistant reply", "content": { "application/json": { "schema": { "type": "object" } } } }
				}
			}
		},
		"/api/ai/chat-stream": {
			"post": {
				"summary": "Chat completion (SSE stream)",
				"tags": ["AI"],
				"requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object" } } } },
				"responses": { "200": { "description": "SSE stream" } }
			}
		},
		"/api/ai/assist": {
			"post": {
				"summary": "Tool-enabled assistant that can fetch server data",
				"tags": ["AI"],
				"requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object" } } } },
				"responses": { "200": { "description": "Assistant reply with tool trace", "content": { "application/json": { "schema": { "type": "object" } } } } }
			}
		},
		"/api/ai/tag-suggest": {
			"post": {
				"summary": "Suggest tags for a note (reuse existing, propose few new)",
				"tags": ["AI"],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["client_id", "note"],
								"properties": {
									"client_id": { "type": "integer" },
									"note": { "type": "string" },
									"maxExisting": { "type": "integer" },
									"maxNew": { "type": "integer" }
								}
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "Tag suggestions",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"status": { "type": "string" },
										"data": {
											"type": "object",
											"properties": {
												"existing": { "type": "array", "items": { "type": "object" } },
												"new": { "type": "array", "items": { "type": "object" } },
												"rationale": { "type": "string" }
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	},
	"components": {
		"schemas": {
			"ContactSocialProfile": {
				"type": "object",
				"properties": {
					"id": { "type": "integer" },
					"contact_id": { "type": "integer" },
					"provider": { "type": "string" },
					"profile_url": { "type": "string" },
					"is_primary": { "type": "boolean" },
					"created_utc": { "type": "string", "format": "date-time" },
					"updated_utc": { "type": "string", "format": "date-time", "nullable": true }
				}
			},
			"ContactSocialProfileCreate": {
				"type": "object",
				"required": ["contact_id", "provider", "profile_url"],
				"properties": {
					"contact_id": { "type": "integer" },
					"provider": { "type": "string" },
					"profile_url": { "type": "string" },
					"is_primary": { "type": "boolean" }
				}
			},
			"ContactSocialProfileUpdate": {
				"type": "object",
				"properties": {
					"contact_id": { "type": "integer" },
					"provider": { "type": "string" },
					"profile_url": { "type": "string" },
					"is_primary": { "type": "boolean" }
				}
			}
		}
	}
}

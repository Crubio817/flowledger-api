{
	"paths": {
		"/api/client-tags": {
			"get": {
				"summary": "List client tags",
				"tags": ["ClientTags"],
				"parameters": [
					{ "in": "query", "name": "page", "schema": { "type": "integer", "minimum": 1 } },
					{ "in": "query", "name": "limit", "schema": { "type": "integer", "minimum": 1 } }
				],
				"responses": {
					"200": {
						"description": "Tags list",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"status": { "type": "string", "enum": ["ok"] },
										"data": { "type": "array", "items": { "$ref": "#/components/schemas/ClientTag" } },
										"meta": { "$ref": "#/components/schemas/PageMeta" }
									}
								}
							}
						}
					}
				}
			},
			"post": {
				"summary": "Create client tag",
				"tags": ["ClientTags"],
				"requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ClientTagCreate" } } } },
				"responses": { "201": { "description": "Tag created", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ClientTag" } } } } }
			}
		},

		"/api/client-tags/{id}": {
			"get": {
				"summary": "Get client tag by id",
				"tags": ["ClientTags"],
				"parameters": [ { "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } } ],
				"responses": { "200": { "description": "Tag", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ClientTag" } } } } }
			},
			"put": {
				"summary": "Update client tag",
				"tags": ["ClientTags"],
				"parameters": [ { "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } } ],
				"requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ClientTagUpdate" } } } },
				"responses": { "200": { "description": "Tag updated", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ClientTag" } } } } }
			},
			"delete": {
				"summary": "Delete client tag",
				"tags": ["ClientTags"],
				"parameters": [ { "in": "path", "name": "id", "required": true, "schema": { "type": "integer" } } ],
				"responses": { "200": { "description": "Deleted" } }
			}
		}

		,
		"/api/client-tag-map": {
			"get": {
				"summary": "List client->tag mappings",
				"tags": ["ClientTagMap"],
				"parameters": [
					{ "in": "query", "name": "page", "schema": { "type": "integer", "minimum": 1 } },
					{ "in": "query", "name": "limit", "schema": { "type": "integer", "minimum": 1 } }
				],
				"responses": {
					"200": {
						"description": "Mappings list",
						"content": { "application/json": { "schema": { "type": "object", "properties": { "status": { "type": "string", "enum": ["ok"] }, "data": { "type": "array", "items": { "$ref": "#/components/schemas/ClientTagMap" } }, "meta": { "$ref": "#/components/schemas/PageMeta" } } } } }
					}
				}
			},
			"post": {
				"summary": "Create client->tag mapping (idempotent)",
				"tags": ["ClientTagMap"],
				"requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ClientTagMap" } } } },
				"responses": { "201": { "description": "Mapping created", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/ClientTagMap" } } } } }
			},
			"delete": {
				"summary": "Delete client->tag mapping",
				"tags": ["ClientTagMap"],
				"parameters": [
					{ "in": "query", "name": "client_id", "required": true, "schema": { "type": "integer" } },
					{ "in": "query", "name": "tag_id", "required": true, "schema": { "type": "integer" } }
				],
				"responses": { "200": { "description": "Deleted" }, "404": { "description": "Not found" } }
			}
		}
	},

	"components": {
		"schemas": {
			"ClientTag": {
				"type": "object",
				"properties": {
					"tag_id": { "type": "integer" },
					"tag_name": { "type": "string" }
				}
			},
			"ClientTagCreate": { "type": "object", "required": [ "tag_name" ], "properties": { "tag_name": { "type": "string" } } },
			"ClientTagUpdate": { "type": "object", "properties": { "tag_name": { "type": "string" } } }
				,
				"ClientTagMap": {
					"type": "object",
					"properties": {
						"client_id": { "type": "integer" },
						"tag_id": { "type": "integer" }
					},
					"required": ["client_id", "tag_id"]
				}
		}
	}
}



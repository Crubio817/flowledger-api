{"openapi":"3.0.3","info":{"title":"FlowLedger API","version":"0.1.0"},"components":{"schemas":{"ErrorEnvelope":{"type":"object","properties":{"error":{"type":"object","properties":{"code":{"type":"string"},"message":{"type":"string"}},"required":["code","message"]}},"required":["error"]},"PageMeta":{"type":"object","properties":{"page":{"type":"integer","minimum":1},"limit":{"type":"integer","minimum":1},"total":{"type":"integer","minimum":0}},"required":["page","limit"]},"DashboardStats":{"type":"object","properties":{"active_clients":{"type":"integer"},"audits_in_progress":{"type":"integer"},"sipocs_completed":{"type":"integer"},"pending_interviews":{"type":"integer"}},"additionalProperties":false},"RecentAudit":{"type":"object","properties":{"audit_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"status":{"type":"string"},"last_touched_utc":{"type":"string","format":"date-time"}},"required":["audit_id","client_id","title","status","last_touched_utc"]},"Audit":{"type":"object","properties":{"audit_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"scope":{"type":"string","nullable":true},"status":{"type":"string"},"created_utc":{"type":"string","format":"date-time"},"updated_utc":{"type":"string","format":"date-time"}},"required":["audit_id","client_id","title"]},"SipocDoc":{"type":"object","properties":{"suppliers_json":{"type":"array","items":{"type":"string"}},"inputs_json":{"type":"array","items":{"type":"string"}},"process_json":{"type":"array","items":{"type":"string"}},"outputs_json":{"type":"array","items":{"type":"string"}},"customers_json":{"type":"array","items":{"type":"string"}},"metrics_json":{"type":"object","additionalProperties":true}}},"Interview":{"type":"object","properties":{"interview_id":{"type":"integer"},"audit_id":{"type":"integer"},"persona":{"type":"string"},"mode":{"type":"string"},"scheduled_utc":{"type":"string","nullable":true,"format":"date-time"},"status":{"type":"string"},"notes":{"type":"string","nullable":true},"created_utc":{"type":"string","format":"date-time"},"updated_utc":{"type":"string","format":"date-time"}},"required":["interview_id","audit_id","persona"]},"InterviewResponse":{"type":"object","properties":{"response_id":{"type":"integer"},"interview_id":{"type":"integer"},"question_id":{"type":"string"},"answer":{"type":"string"},"created_utc":{"type":"string","format":"date-time"}},"required":["response_id","interview_id","question_id","answer"]},"Finding":{"type":"object","properties":{"audit_id":{"type":"integer"},"pain_points_json":{"type":"array","items":{"type":"string"}},"opportunities_json":{"type":"array","items":{"type":"string"}},"recommendations_json":{"type":"array","items":{"type":"string"}},"updated_utc":{"type":"string","format":"date-time"}},"required":["audit_id"]},"ProcessMap":{"type":"object","properties":{"process_map_id":{"type":"integer"},"audit_id":{"type":"integer"},"title":{"type":"string","nullable":true},"blob_path":{"type":"string"},"file_type":{"type":"string","nullable":true},"uploaded_utc":{"type":"string","format":"date-time"}},"required":["process_map_id","audit_id","blob_path"]},"UploadUrlResponse":{"type":"object","properties":{"uploadUrl":{"type":"string"},"blob_path":{"type":"string"},"contentType":{"type":"string"}},"required":["uploadUrl","blob_path","contentType"]},"ClientsOverviewItem":{"type":"object","properties":{"client_id":{"type":"integer"},"client_name":{"type":"string"},"is_active":{"type":"boolean"},"created_utc":{"type":"string","format":"date-time"},"primary_contact_name":{"type":"string","nullable":true},"primary_contact_email":{"type":"string","nullable":true},"tags":{"type":"string","nullable":true,"description":"Comma-delimited or JSON string of tags"},"engagement_count":{"type":"integer"},"pending_onboarding_tasks":{"type":"integer"},"last_activity_utc":{"type":"string","format":"date-time","nullable":true}},"required":["client_id","client_name","is_active","created_utc"]},"ClientContact":{"type":"object","properties":{"contact_id":{"type":"integer"},"client_id":{"type":"integer"},"first_name":{"type":"string","nullable":true},"last_name":{"type":"string","nullable":true},"email":{"type":"string","nullable":true},"phone":{"type":"string","nullable":true},"title":{"type":"string","nullable":true},"is_primary":{"type":"boolean"},"is_active":{"type":"boolean"},"created_utc":{"type":"string","format":"date-time","nullable":true},"updated_utc":{"type":"string","format":"date-time","nullable":true}}},"ContactSocialProfile":{"type":"object","properties":{"id":{"type":"integer"},"contact_id":{"type":"integer"},"provider":{"type":"string"},"profile_url":{"type":"string"},"is_primary":{"type":"boolean"},"created_utc":{"type":"string","format":"date-time"},"updated_utc":{"type":"string","format":"date-time","nullable":true}}},"ContactSocialProfileCreate":{"type":"object","required":["contact_id","provider","profile_url"],"properties":{"contact_id":{"type":"integer"},"provider":{"type":"string"},"profile_url":{"type":"string"},"is_primary":{"type":"boolean"}}},"ContactSocialProfileUpdate":{"type":"object","properties":{"contact_id":{"type":"integer"},"provider":{"type":"string"},"profile_url":{"type":"string"},"is_primary":{"type":"boolean"}}},"ClientTagCreate":{"type":"object","required":["tag_name"],"properties":{"tag_name":{"type":"string"}}},"ClientTagUpdate":{"type":"object","properties":{"tag_name":{"type":"string"}}},"ClientTag":{"type":"object","properties":{"tag_id":{"type":"integer"},"tag_name":{"type":"string"}}},"ClientTagMap":{"type":"object","properties":{"engagement_id":{"type":"integer"},"tag_id":{"type":"integer"}},"required":["engagement_id","tag_id"]},"OnboardingTask":{"type":"object","properties":{"task_id":{"type":"integer"},"client_id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"due_utc":{"type":"string","format":"date-time","nullable":true},"status":{"type":"string"},"created_utc":{"type":"string","format":"date-time"},"updated_utc":{"type":"string","format":"date-time","nullable":true}},"required":["task_id","client_id","name"]},"OnboardingTaskCreate":{"type":"object","required":["client_id","name"],"properties":{"client_id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"due_utc":{"type":"string","format":"date-time","nullable":true},"status":{"type":"string","nullable":true}}},"OnboardingTaskUpdate":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string","nullable":true},"due_utc":{"type":"string","format":"date-time","nullable":true},"status":{"type":"string"}}},"PathTemplate":{"type":"object","properties":{"path_id":{"type":"integer"},"name":{"type":"string"}}},"PathTemplatePublish":{"type":"object","properties":{"new_version":{"type":"string"}},"required":["new_version"]},"PathStepsReorder":{"type":"object","properties":{"path_id":{"type":"integer"},"order":{"type":"array","items":{"type":"integer"}}},"required":["path_id","order"]},"PathStep":{"type":"object","properties":{"step_id":{"type":"integer"},"path_id":{"type":"integer"}}},"PathTemplateUsage":{"type":"object","properties":{"audit_count":{"type":"integer"},"audits":{"type":"array","items":{"type":"object","properties":{"audit_id":{"type":"integer"},"title":{"type":"string"},"state":{"type":"string"},"percent_complete":{"type":"integer"},"created_utc":{"type":"string"},"updated_utc":{"type":"string"}}}}}}}},"paths":{"/api/audit-sipoc":{"get":{"summary":"List SIPOC docs","tags":["SIPOC"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer"}},{"in":"query","name":"limit","schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/SipocDoc"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}}},"/api/audit-sipoc/{audit_id}":{"get":{"summary":"Get SIPOC by audit_id","tags":["SIPOC"],"parameters":[{"in":"path","name":"audit_id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"$ref":"#/components/schemas/SipocDoc"}}}}}}}},"put":{"summary":"Upsert SIPOC by audit_id","tags":["SIPOC"],"parameters":[{"in":"path","name":"audit_id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SipocDoc"}}}},"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"$ref":"#/components/schemas/SipocDoc"}}}}}}}}},"/api/audits":{"get":{"summary":"List audits","tags":["Audits"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}}],"responses":{"200":{"description":"Audits list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"type":"object","properties":{"audit_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"scope":{"type":"string","nullable":true},"status":{"type":"string"},"created_utc":{"type":"string","format":"date-time"},"updated_utc":{"type":"string","format":"date-time"}}}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}},"post":{"summary":"Create audit","tags":["Audits"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["audit_id","client_id","title"],"properties":{"audit_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"scope":{"type":"string","nullable":true},"status":{"type":"string"}}}}}},"responses":{"201":{"description":"Audit created","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"audit_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"scope":{"type":"string","nullable":true},"status":{"type":"string"},"created_utc":{"type":"string","format":"date-time"},"updated_utc":{"type":"string","format":"date-time"}}}}}}}}}}},"/api/audits/{audit_id}":{"get":{"summary":"Get audit by id","tags":["Audits"],"parameters":[{"in":"path","name":"audit_id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"audit_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"scope":{"type":"string","nullable":true},"status":{"type":"string"},"created_utc":{"type":"string","format":"date-time"},"updated_utc":{"type":"string","format":"date-time"}}}}}}}}}},"put":{"summary":"Update audit","tags":["Audits"],"parameters":[{"in":"path","name":"audit_id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"scope":{"type":"string","nullable":true},"status":{"type":"string"}}}}}}},"delete":{"summary":"Delete audit","tags":["Audits"],"parameters":[{"in":"path","name":"audit_id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Deleted"}}}},"/api/client-contacts":{"get":{"summary":"List client contacts","tags":["ClientContacts"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}}],"responses":{"200":{"description":"Contacts list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"type":"object","properties":{"contact_id":{"type":"integer"},"client_id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"title":{"type":"string"},"is_primary":{"type":"boolean"},"is_active":{"type":"boolean"}}}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}},"post":{"summary":"Create client contact","tags":["ClientContacts"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["client_id"],"properties":{"client_id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"title":{"type":"string"},"is_primary":{"type":"boolean"},"is_active":{"type":"boolean"}}}}}},"responses":{"201":{"description":"Contact created","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"contact_id":{"type":"integer"},"client_id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"title":{"type":"string"}}}}}}}}}}},"/api/client-contacts/{id}":{"get":{"summary":"Get client contact by id","tags":["ClientContacts"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Contact","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"contact_id":{"type":"integer"},"client_id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"title":{"type":"string"}}}}}}}}}},"put":{"summary":"Update client contact","tags":["ClientContacts"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"title":{"type":"string"},"is_primary":{"type":"boolean"},"is_active":{"type":"boolean"}}}}}},"responses":{"200":{"description":"Contact updated","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"contact_id":{"type":"integer"},"client_id":{"type":"integer"},"first_name":{"type":"string"},"last_name":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"}}}}}}}}}},"delete":{"summary":"Delete client contact","tags":["ClientContacts"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Deleted","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"deleted":{"type":"integer"}}}}}}}}}}},"/api/client-engagements":{"get":{"summary":"List client engagements","tags":["ClientEngagements"],"responses":{"200":{"description":"Engagements list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"type":"object","properties":{"engagement_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"start_date":{"type":"string","nullable":true},"end_date":{"type":"string","nullable":true},"status":{"type":"string"}}}},"meta":{"type":"object","properties":{"page":{"type":"integer"},"limit":{"type":"integer"},"total":{"type":"integer"}}}}}}}}}},"post":{"summary":"Create client engagement","tags":["ClientEngagements"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["client_id","title"],"properties":{"client_id":{"type":"integer"},"title":{"type":"string"},"start_date":{"type":"string","nullable":true},"end_date":{"type":"string","nullable":true},"status":{"type":"string"}}}}}},"responses":{"201":{"description":"Engagement created","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"engagement_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"start_date":{"type":"string","nullable":true},"end_date":{"type":"string","nullable":true},"status":{"type":"string"}}}}}}}}}}},"/api/client-engagements/{id}":{"get":{"summary":"Get client engagement by id","tags":["ClientEngagements"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Engagement","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"engagement_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"start_date":{"type":"string","nullable":true},"end_date":{"type":"string","nullable":true},"status":{"type":"string"}}}}}}}}}},"put":{"summary":"Update client engagement","tags":["ClientEngagements"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"start_date":{"type":"string","nullable":true},"end_date":{"type":"string","nullable":true},"status":{"type":"string"}}}}}},"responses":{"200":{"description":"Engagement updated","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"engagement_id":{"type":"integer"},"client_id":{"type":"integer"},"title":{"type":"string"},"start_date":{"type":"string","nullable":true},"end_date":{"type":"string","nullable":true},"status":{"type":"string"}}}}}}}}}},"delete":{"summary":"Delete client engagement","tags":["ClientEngagements"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Deleted","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"deleted":{"type":"integer"}}}}}}}}}}},"/api/client-locations":{"get":{"summary":"List client locations","tags":["ClientLocations"],"responses":{"200":{"description":"Locations list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"type":"object","properties":{"location_id":{"type":"integer"},"client_id":{"type":"integer"},"name":{"type":"string"},"address":{"type":"string"},"active":{"type":"boolean"}}}},"meta":{"type":"object","properties":{"page":{"type":"integer"},"limit":{"type":"integer"},"total":{"type":"integer"}}}}}}}}}},"post":{"summary":"Create client location","tags":["ClientLocations"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["client_id","name"],"properties":{"client_id":{"type":"integer"},"name":{"type":"string"},"address":{"type":"string"},"active":{"type":"boolean"}}}}}},"responses":{"201":{"description":"Location created","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"location_id":{"type":"integer"},"client_id":{"type":"integer"},"name":{"type":"string"},"address":{"type":"string"},"active":{"type":"boolean"}}}}}}}}}}},"/api/client-locations/{id}":{"get":{"summary":"Get client location by id","tags":["ClientLocations"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Location","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"location_id":{"type":"integer"},"client_id":{"type":"integer"},"name":{"type":"string"},"address":{"type":"string"},"active":{"type":"boolean"}}}}}}}}}},"put":{"summary":"Update client location","tags":["ClientLocations"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"address":{"type":"string"},"active":{"type":"boolean"}}}}}},"responses":{"200":{"description":"Location updated","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"location_id":{"type":"integer"},"client_id":{"type":"integer"},"name":{"type":"string"},"address":{"type":"string"},"active":{"type":"boolean"}}}}}}}}}},"delete":{"summary":"Delete client location","tags":["ClientLocations"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Deleted","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"deleted":{"type":"integer"}}}}}}}}}}},"/api/clients":{"get":{"summary":"List clients","tags":["Clients"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}}],"responses":{"200":{"description":"Clients list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"type":"object","properties":{"client_id":{"type":"integer"},"name":{"type":"string"},"is_active":{"type":"boolean"},"created_utc":{"type":"string","format":"date-time"}}}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}}},"/api/clients/create-proc":{"post":{"summary":"Create client via stored procedure sp_create_client","description":"Dynamically inspects parameters of app.sp_create_client and binds matching JSON body fields (strip leading @). Any OUTPUT params returned if present along with first recordset row.","tags":["Clients"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"description":"Keys must match stored procedure parameter names without the leading @ symbol."}}}},"responses":{"200":{"description":"Client created (procedure result)","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"client":{"type":"object","additionalProperties":true},"proc_result":{"type":"object","additionalProperties":true}}}}}}}}}}},"/api/clients/{client_id}/setup":{"post":{"summary":"Orchestrate post-creation client setup (idempotent)","tags":["Clients"],"parameters":[{"in":"path","name":"client_id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["playbook_code","owner_user_id"],"properties":{"client_name":{"type":"string"},"playbook_code":{"type":"string"},"owner_user_id":{"type":"integer"}}}}}},"responses":{"200":{"description":"Setup executed (idempotent)","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"object","properties":{"client_slug":{"type":"string"},"folders":{"type":"array","items":{"type":"string"}}}}}}}}}}}},"/api/findings/{audit_id}":{"get":{"summary":"Get findings by audit_id","tags":["Findings"],"parameters":[{"in":"path","name":"audit_id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"$ref":"#/components/schemas/Finding"}}}}}}}},"put":{"summary":"Upsert findings by audit_id","tags":["Findings"],"parameters":[{"in":"path","name":"audit_id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Finding"}}}},"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"$ref":"#/components/schemas/Finding"}}}}}}}}},"/api/interview-responses":{"get":{"summary":"List interview responses","tags":["Interview Responses"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer"}},{"in":"query","name":"limit","schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/InterviewResponse"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}}},"/api/interviews":{"get":{"summary":"List interviews","tags":["Interviews"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer"}},{"in":"query","name":"limit","schema":{"type":"integer"}},{"in":"query","name":"sort","schema":{"type":"string"}},{"in":"query","name":"order","schema":{"type":"string","enum":["ASC","DESC"]}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/Interview"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}}},"/api/process-maps":{"get":{"summary":"List process maps","tags":["Process Maps"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer"}},{"in":"query","name":"limit","schema":{"type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/ProcessMap"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}}},"/api/process-maps/upload-url":{"post":{"summary":"Get pre-signed upload URL for a process map file (stub)","tags":["Process Maps"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"audit_id":{"type":"integer"},"filename":{"type":"string"},"contentType":{"type":"string"}},"required":["audit_id","filename","contentType"]}}}},"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"$ref":"#/components/schemas/UploadUrlResponse"}}}}}}}}},"/api/dashboard-stats":{"get":{"summary":"Get dashboard aggregate stats","tags":["Views"],"responses":{"200":{"description":"Stats","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"$ref":"#/components/schemas/DashboardStats"}}}}}}}}},"/api/audit-recent-touch":{"get":{"summary":"List recent audit activity","tags":["Views"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}}],"responses":{"200":{"description":"Recent audits","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/RecentAudit"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}}},"/api/clients-overview":{"get":{"summary":"List clients overview (aggregated stats & metadata)","tags":["Views"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}}],"responses":{"200":{"description":"Clients overview list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/ClientsOverviewItem"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}}},"/healthz":{"get":{"summary":"Liveness","responses":{"200":{"description":"OK"}}}},"/api/health":{"get":{"summary":"API health","responses":{"200":{"description":"OK"}}}},"/api/contact-social-profiles":{"get":{"summary":"List contact social profiles","tags":["ContactSocialProfiles"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/ContactSocialProfile"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}},"post":{"summary":"Create contact social profile","tags":["ContactSocialProfiles"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactSocialProfileCreate"}}}},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"$ref":"#/components/schemas/ContactSocialProfile"}}}}}}}}},"/api/ai/chat":{"post":{"summary":"Chat completion","tags":["AI"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["messages"],"properties":{"messages":{"type":"array","items":{"type":"object"}},"model":{"type":"string"},"temperature":{"type":"number"}}}}}},"responses":{"200":{"description":"Assistant reply","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/ai/chat-stream":{"post":{"summary":"Chat completion (SSE stream)","tags":["AI"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"description":"SSE stream"}}}},"/api/ai/assist":{"post":{"summary":"Tool-enabled assistant that can fetch server data","tags":["AI"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"description":"Assistant reply with tool trace","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/api/ai/tag-suggest":{"post":{"summary":"Suggest tags for a note (reuse existing, propose few new)","tags":["AI"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["client_id","note"],"properties":{"client_id":{"type":"integer"},"note":{"type":"string"},"maxExisting":{"type":"integer"},"maxNew":{"type":"integer"}}}}}},"responses":{"200":{"description":"Tag suggestions","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string"},"data":{"type":"object","properties":{"existing":{"type":"array","items":{"type":"object"}},"new":{"type":"array","items":{"type":"object"}},"rationale":{"type":"string"}}}}}}}}}}},"/api/client-tags":{"get":{"summary":"List client tags","tags":["ClientTags"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}}],"responses":{"200":{"description":"Tags list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/ClientTag"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}},"post":{"summary":"Create client tag","tags":["ClientTags"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientTagCreate"}}}},"responses":{"201":{"description":"Tag created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientTag"}}}}}}},"/api/client-tags/{id}":{"get":{"summary":"Get client tag by id","tags":["ClientTags"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Tag","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientTag"}}}}}},"put":{"summary":"Update client tag","tags":["ClientTags"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientTagUpdate"}}}},"responses":{"200":{"description":"Tag updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientTag"}}}}}},"delete":{"summary":"Delete client tag","tags":["ClientTags"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Deleted"}}}},"/api/client-tag-map":{"get":{"summary":"List client->tag mappings","tags":["ClientTagMap"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}}],"responses":{"200":{"description":"Mappings list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/ClientTagMap"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}},"post":{"summary":"Create client->tag mapping (idempotent)","tags":["ClientTagMap"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientTagMap"}}}},"responses":{"201":{"description":"Mapping created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientTagMap"}}}}}},"delete":{"summary":"Delete client->tag mapping","tags":["ClientTagMap"],"parameters":[{"in":"query","name":"engagement_id","required":true,"schema":{"type":"integer"}},{"in":"query","name":"tag_id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Deleted"},"404":{"description":"Not found"}}}},"/api/onboarding-tasks":{"get":{"summary":"List onboarding tasks","tags":["OnboardingTasks"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1}},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1}},{"in":"query","name":"client_id","schema":{"type":"integer"}}],"responses":{"200":{"description":"Tasks list","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["ok"]},"data":{"type":"array","items":{"$ref":"#/components/schemas/OnboardingTask"}},"meta":{"$ref":"#/components/schemas/PageMeta"}}}}}}}},"post":{"summary":"Create onboarding task","tags":["OnboardingTasks"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingTaskCreate"}}}},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingTask"}}}}}}},"/api/onboarding-tasks/{id}":{"put":{"summary":"Update onboarding task","tags":["OnboardingTasks"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingTaskUpdate"}}}},"responses":{"200":{"description":"Updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OnboardingTask"}}}}}},"delete":{"summary":"Delete onboarding task","tags":["OnboardingTasks"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Deleted"}}}},"/api/ai/name-suggest":{"post":{"summary":"Suggest engagement names","tags":["AI"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NameSuggestRequest"}}}},"responses":{"200":{"description":"Name suggestions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NameSuggestResponse"}}}}}}},"/api/path-templates/{path_id}/publish":{"post":{"summary":"Publish a path template (create new active version)","parameters":[{"name":"path_id","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PathTemplatePublish"},"examples":{"default":{"value":{"new_version":"v1.1"}}}}}},"responses":{"201":{"description":"Published template","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PathTemplate"}}}}}}},"/api/path-templates/{path_id}/clone":{"post":{"summary":"Clone a path template as a draft","parameters":[{"name":"path_id","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"201":{"description":"Cloned template","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PathTemplate"}}}}}}},"/api/path-steps/reorder":{"put":{"summary":"Reorder steps for a path","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PathStepsReorder"},"examples":{"default":{"value":{"path_id":1,"order":[12,15,14]}}}}}},"responses":{"200":{"description":"Updated step list","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PathStep"}}}}}}}},"/api/path-templates/{path_id}/usage":{"get":{"summary":"Get template usage (audit count and recent audits)","parameters":[{"name":"path_id","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Usage summary","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PathTemplateUsage"}}}}}}}},"tags":[{"name":"OnboardingTasks","description":"CRUD for client onboarding tasks"}]}